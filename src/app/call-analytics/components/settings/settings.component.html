<app-page-header pageTitle="Call Analytics Settings" class="w-full h-fit" [breadcrumbItems]="breadcrumbItems"/>
<div class="flex flex-col">
  <div>
    <p-toast></p-toast>
    <p-panel>
      <div class="flex flex-col">
        <form [formGroup]="notificationsSettingsForm" (ngSubmit)="onSubmit()">
          <div class="flex gap-20 px-10">
            <div class="w-1/2">
              <p-divider align="left" type="solid">
                <b>Sentiment Shift Configuration</b>
              </p-divider>
              <div class="flex align-items-center gap-1 text-sm justify-between mb-3">
                <p-checkbox name="notify" (onChange)="onChangeBelowScore($event)"
                            formControlName="bellowNotify" [binary]="true"
                            label="Notify me when the sentiment score is below the value: "></p-checkbox>
                <p-inputNumber [showButtons]="true" class="short-input"
                               formControlName="bellowScore" mode="decimal" inputId="minmax-buttons"
                               [min]="-10" [max]="10">
                </p-inputNumber>
              </div>
              <div class="flex align-items-center gap-1 text-sm justify-between mb-10">
                <p-checkbox name="notify" (onChange)="onChangeAboveScore($event)" [binary]="true"
                            formControlName="aboveNotify"
                            label="Notify when the sentiment score is above: "></p-checkbox>
                <p-inputNumber [disabled]="true" class="short-input" formControlName="aboveScore"
                               mode="decimal" [showButtons]="true" inputId="minmax-buttons" [min]="-10"
                               [max]="10"></p-inputNumber>
              </div>

              <p-divider align="left" type="solid">
                <b>Keywords Configuration</b>
              </p-divider>

              <div class="flex items-center justify-between ">
                <p>Enable Keywords Notifications</p>
                <p-inputSwitch formControlName="enableKeywordsNotification"/>
              </div>

              <div class="w-full p-fluid">
                <p>Special Keywords To Send Notifications</p>
                <p-chips formControlName="keywords" [disabled]="!notificationsSettingsForm.get('enableKeywordsNotification')?.value"/>
              </div>

            </div>
            <div class="w-1/2">
              <p-divider align="left" type="solid">
                <b>Topics Configuration</b>
              </p-divider>

              <div class="w-full p-fluid mb-10">
                <p>Topics to categorize calls</p>
                <p-chips formControlName="topics"/>
              </div>

              <p-divider align="left" type="solid">
                <b>Notification Channels Configuration</b>
              </p-divider>

              <div class="flex items-center justify-between ">
                <p>Send Push Notifications</p>
                <p-inputSwitch formControlName="enablePushNotification"/>
              </div>
              <div class="flex items-center justify-between ">
                <p>Send Email Notifications</p>
                <p-inputSwitch formControlName="enableEmailNotification"/>
              </div>
              <div class="w-full p-fluid mb-5">
                <p>Email Notifications Receivers</p>
                <p-chips formControlName="emails" [disabled]="!notificationsSettingsForm.get('enableEmailNotification')?.value"/>
              </div>
            </div>
          </div>
          <div class="flex justify-end px-10 py-5">
            <button pButton pRipple label="Update Settings" class="p-button-primary"></button>
          </div>
        </form>
      </div>
    </p-panel>
  </div>
</div>
