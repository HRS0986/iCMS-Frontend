<!-- TODO: handle the overflow -->
<p-panel class="flex flex-col mb-4" [toggleable]="true" toggler="header">
  <ng-template pTemplate="header">
    <div class="flex align-items-center gap-2">
      <span class="font-bold"> Filters </span>
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="my-container grid grid-cols-1 md:grid-cols-2 justify-stretch gap-4">
      <div class="min-w-40 min-h-10 grow">
        <div class="mb-2">Search</div>
        <div class="w-full ">
          <input
            type="text"
            pInputText
            class="w-full"
            placeholder="search anything"
          />
        </div>
      </div>
      <div class="min-w-40 min-h-10 grow">
        <div class="mb-2">Date Range</div>
        <div class="w-full  relative">
          <p-calendar
            [(ngModel)]="selectedDate"  
            selectionMode="range"
            [readonlyInput]="true"
            [showIcon]="true"
            [showButtonBar]="true"
            styleClass="w-full"
            aria-placeholder="overall"
          ></p-calendar>
        </div>
      </div>
      <div class="min-w-40 min-h-10 grow">
        <div class="mb-2">Sender</div>
        <div class="w-full ">
          <span class="p-fluid">
            <p-autoComplete
              [(ngModel)]="selectedItemsSender"
              [suggestions]="itemsSender"
              (completeMethod)="searchSender($event)"
              [virtualScroll]="true"
              [virtualScrollItemSize]="34"
              [dropdown]="true"
              [multiple]="true"
              class="w-full"
            />
          </span>
        </div>
      </div>

      <div class="min-w-40 min-h-10 grow">
        <div class="mb-2">Receiver</div>
        <div class="w-full ">
          <span class="p-fluid">
            <p-autoComplete
              [(ngModel)]="selectedItemsReceiver"
              [suggestions]="itemsReceiver"
              (completeMethod)="searchReceiver($event)"
              [virtualScroll]="true"
              [virtualScrollItemSize]="34"
              [dropdown]="true"
              [multiple]="true"
            />
          </span>
        </div>
      </div>

      <div class="min-w-40 min-h-10 grow">
        <div class="relative">
          <div class="mb-2">Tags</div>
          <div class="absolute right-0 top-0 flex">
            <p-checkbox 
            [(ngModel)]="reqAllTags"
            label="Require all tags" 
            [binary]="true" 
            labelStyleClass="text-xs"
            />
          </div>
        </div>
        <div class="w-full ">
          <span class="p-fluid">
            <p-autoComplete
              [(ngModel)]="selectedItemsTags"
              [suggestions]="itemsTags"
              (completeMethod)="searchTags($event)"
              [virtualScroll]="true"
              [virtualScrollItemSize]="34"
              [dropdown]="true"
              [multiple]="true"
            />
          </span>
        </div>
      </div>

      <div class="min-w-40 min-h-10 grow">
        <div class="mb-2">Status</div>
        <div class="w-full ">
          <span class="p-fluid">
            <p-autoComplete
              [(ngModel)]="selectedItemsStatus"
              [suggestions]="itemsStatus"
              (completeMethod)="searchStatus($event)"
              [virtualScroll]="true"
              [virtualScrollItemSize]="34"
              [dropdown]="true"
              [multiple]="true"
            />
          </span>
        </div>
      </div>

      <div class="min-w-40 min-h-10 grow">
        <div class="mb-2">Other properties</div>
        <div class="w-full ">
          <input type="text" pInputText class="w-full" placeholder="anything" />
        </div>
      </div>
      <div class="min-w-40 min-h-10 grow flex items-center justify-center flex-wrap gap-2">
        <p-tag 
          (click)="clickImportant()"
          value="Critical"
          [rounded]="true"
          [severity]="importantOnly ? 'success' : 'info'"
          styleClass="cursor-pointer"
        />
        <p-tag 
          (click)="clickNew()"
          value="New"
          [rounded]="true"
          [severity]="newOnly ? 'success' : 'info'"
          styleClass="cursor-pointer"
        />
      </div>

      <div class="grow col-span-2 min-w-40 min-h-10 flex gap-3 justify-end">
        <p-button
          label="Apply"
          [outlined]="false"
          [rounded]="true"
          severity="primary"
        />
        <p-button
          label="Clear"
          [outlined]="true"
          [rounded]="true"
          severity="secondary"
        />
      </div>
    </div>
  </ng-template>
</p-panel>
